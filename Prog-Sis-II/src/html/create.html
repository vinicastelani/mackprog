<!DOCTYPE html>
<html>

<head>
  <title>Conta Bancaria (create)</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="/site/sakura.css">
</head>

<body>
  <p><a href="/">&lt; Voltar para p√°gina inicial</a></p>
  <h1>Nova Conta Bancaria</h1>
  <table>
    <tr>
      <td>Nome do Titular:</td>
      <td><input type="text" id="txtNomeTitular"></td>
    </tr>
    <tr>
      <td>Saldo:</td>
      <td><input type="text" id="txtSaldo"></td>
    </tr>
    <tr>
      <td>Agencia:</td>
      <td><input type="text" id="txtAgencia"></td>
    </tr>
    <tr>
      <td></td>
      <td><input type="button" onclick="criarConta()" value="Criar"></td>
    </tr>
  </table>
  <p style="font-weight:bold" id="mensagem"></p>
  <script>
    const textoNomeTitular = document.querySelector('#txtNomeTitular');
    const textoSaldo = document.querySelector('#txtSaldo');
    const textoAgencia = document.querySelector('#txtAgencia');
    const paragrafoMensagem = document.querySelector('#mensagem');
    function mostrarMensagem(contaCadastrada) {
      textoNomeTitular.value = '';
      textoSaldo.value = '';
      textoAgencia.value = '';
      paragrafoMensagem.innerHTML = 'Conta Bancaria criada com o ID: ' + contaCadastrada.id;
    }
    async function criarConta() {
      const URL = `/api/conta-bancaria`;
      const dadosContaBancaria = {
        'nomeTitular': textoNomeTitular.value,
        'saldo': textoSaldo.value,
        'numeroAgencia': textoAgencia.value
      };
      const postRequest = {
        method: 'POST',
        body: JSON.stringify(dadosContaBancaria),
        headers: {
          'Content-type': 'application/json;charset=UTF-8'
        }
      };
      try {
        fetch(URL, postRequest).then(resposta => resposta.json()).then(jsonResponse => mostrarMensagem(jsonResponse));
      } catch (e) {
        paragrafoMensagem.innerHTML = e;
      }
    }
  </script>
</body>

</html>